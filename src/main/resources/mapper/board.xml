<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<select id="getList" parameterType="ray.data.BoardParamVo" resultType="ray.data.BoardVo">
		SELECT
			seq
			, category_seq AS categorySeq
			, member_seq AS memberSeq
			, title
			, content
			, recommend
			, un_recommend AS unRecommend
			, view_cnt AS viewCnt
			, reg_date AS regDate
			, mod_date AS modDate
		FROM ch_board
		WHERE 1=1
		<if test="categorySeq > 0">
			AND category_seq = #{categorySeq}
		</if>
		LIMIT ${pageNum * rowCount}, ${rowCount}
	</select>

	<select id="getListTotalCount" parameterType="ray.data.BoardParamVo" resultType="int">
		SELECT
			COUNT(*)
		FROM ch_board
		WHERE 1=1
		<if test="categorySeq > 0">
			AND category_seq = #{categorySeq}
		</if>
	</select>

	<insert id="insertVo" parameterType="ray.data.param.BoardParamVo">
		INSERT INTO ch_board (
			category_seq
			, member_seq
			, title
			, content
			, reg_date
		) VALUES (
			#{categorySeq}
			, #{memberSeq}
			, #{title}
			, #{content}
			, NOW()
		)
	</insert>

	<update id="updateVo" parameterType="ray.data.param.BoardParamVo">
		UPDATE ch_board SET
			category_seq = #{categorySeq}
			, member_seq = #{memberSeq}
			, title
			, content
			, mod_date=NOW()
		WHERE seq = #{seq}
	</update>

	<delete id="deleteVo" parameterType="int">
		DELETE FROM ch_board WHERE seq = #{value}
	</delete>
</mapper>
